name: TryHackMe Update Badge

on:
  schedule:
    # Make it run every 24 hours
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  tryhackme-badge-update:
    name: Update this repo's tryhackme badge with the latest tryhackme image badge
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      

      # Update the TryHackMe badge
      - name: Update TryHackMe badge
        uses: p4p1/tryhackme-badge-workflow@main
        with:
          username: "4L4WN3.H4CK"
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
      # Add the untracked file
      - name: Add untracked file
        run: |
          git add assets/thm_propic.png
          git config --global user.email "a.3alawneh@gmail.com"
          git config --global user.name "AhmadAlawneh3"
          git commit -m "Add thm_propic.png to assets directory"
          
      # Push the changes back to the repository
      - name: Push changes
        run: git push
